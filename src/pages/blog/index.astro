---
import Base from "@layouts/Base.astro";
import BlogPostLayout from "@components/BlogPostLayout.astro";
let posts = await Astro.glob("./*.md");

posts = posts.sort((a, b) => {
	if (a.frontmatter.pubDate > b.frontmatter.pubDate) {
		return -1;
	}
	if (b.frontmatter.pubDate > a.frontmatter.pubDate) {
		return 1;
	}
	return 0;
});

if (import.meta.env.PROD) {
	posts = posts.filter((post) => !post.frontmatter.draft);
}
---

<Base title="My Blog Posts" , heading="My Blog Posts">
	<div>
		<ul>
			{
				posts.map((post) => (
					<BlogPostLayout
						url={post.url}
						draft={post.frontmatter.draft}
						title={post.frontmatter.title}
						pubDate={post.frontmatter.pubDate}
					/>
				))
			}
		</ul>
	</div>
</Base>
